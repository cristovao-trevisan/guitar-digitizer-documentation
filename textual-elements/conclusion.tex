\chapter[Conclusion]{Conclusions}

The hardware project showed be reliable and robust. The amplification worked
well for the musical instrument signal in order to be further acquired by the
microcontroller ADC, digitizing the signal as expected.
The project proved to be challenging -- completely assembling a
hexaphonic pickup and the amplifier system, but it has performed successfully.

Real time note detection proved not to be so accurate. Legato (connected) notes
may cause a middle note detection and there are miss-detections (mostly at frequency
transitions). It works well enough for live play of MIDI instruments, but not
for music notation. It has a lot of room for improvement, and the means to achieve
it are discussed next.

Even if not having robustness to be a commercial product this project is still a big source
of learning and a proof of concept. To build it, knowledge about almost every area
of electronic engineering was needed at some level. Lots of work still need to be put on it,
but it does have potential to evolve into a useful solution for guitar digitization.

As for engineering effort, it required knowledge from passive hardware, to active hardware
(amplifiers), low level software (firmware), digital communication (USB) and up to high
level software (that can be further divided to even more areas). Summarizing, it was
a great way of learning and proofing our proeficiency in electronic engineering.

The area of musical signal processing proved to be as complex as it popularly said to be.
Still with a fair amount of effort made it is possible to use it in a real world application,
even for non-specialists in signal processing, like ourselves.

Finally our project was fun to build and even more fun to use and play with, and achieved
the desired result of showing that it is possible to make guitar digitization cheap and
efficient, even if not yet to that point.

\section{Future Work}

\subsection{Hardware}
For the future and thinking on production it is thought to test some INA326 IC
for other supplier, as the imported from Chinese suppliers, to verify if the results
are acceptable as the prototype amplifier, this change is thinking on low the cost,
but thinking on quality maintenance.
With this change other could be performed, as change all the through-hole components
by the surface mount (SMD). This should low the costs and could lower the board dimensions.
Other change that could be performed is change the trimmers potentiometers by programmable
resistors, this change will be responsible by adjust the amplifier gain automatically.
It is ideal to perform the magnet wrapping automatically. This improvement will help on time
production, component quality, component cost and component dimensions.
Other improvement is to communicate with the firmware using wireless communication,
this advance will bring more mobility to the gadget, because the firmware will not more be
assembled on the PCB, which signifies that it will not have the PC connection cable from the guitar.

\subsection{Software}
\begin{itemize}
  \item \textbf{Note Detection}: For real world music notation a different solution is needed: record the signals
  and post-process them. This way it is possible to use a more detailed analysis
  of each signal and thus get very good results, as there is much more computing
  power available when not being limited by real-time processing.  
  \item \textbf{Performance}: Though real time analysis work, a few limitations were detected. Buffering can only
  process each data point one time (can't use a sliding buffer that recycles data).
  This means that we are close to the processing limits, due to two causes: single
  core processing and slow algorithms. 
  
  One step of the solution is to use multi-core processing for the pitch detection,
  which can be done using Node.js support for it. 
  
  As already stated (\autoref{pitch-detection-implementation}) the current implementation
  uses quadratic growth algorithms, while it can be improved to logarithmic
  growth. Fixing this will improve the performance to a point where multi-core processing
  won't be even necessary.
  \item \textbf{Algorithm Improvements}: A few algorithm modifications may also improve the project's results. Most noticeable
  would be the above mentioned buffering to process each input multiple times, with a
  sliding window - which needs performance improvements first.
  
  Another change necessary would be to remove co-channel interference in a more fashioned
  way other than amplitude check, making it easier for the pitch detection algorithm to work.
  
  \item \textbf{New Features}: A main feature not yet implemented is also necessary: vibrato detection. Vibrato is the
  note's small variation of frequency without changing to another note. This is widely used
  by musicians and needs to be implemented, but has not been considered yet.
  
  As already mentioned recording will be a breaking change to the system. The ability to have
  more processing power due to not run in real time can greatly improve the system accuracy.
  It also makes possible to look ahead of time to check with more precision a single moment
  (as notes are frequencies time is an important matter).  
\end{itemize}
